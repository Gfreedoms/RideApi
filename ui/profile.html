<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- to take up the width of the device-->
	<link rel="stylesheet" type="text/css" href="assets/css/styles.css">
</head>
<body >
	<header>
		<a href="index.html" class="header-logo">Ride My Way</a>

		<nav>
			<ul>
				<li><a href="index.html">Home</a></li>
				<li><a href="trips.html">My Trips</a></li>
				<li><a href="friends.html">Friends</a></li>
				<li><a href="profile.html">Profile</a></li>
			</ul>
			<a href="login.html" class="header-right2">Byarugaba S (Log Out)</a>
		</nav>

	</header>

	<div class="container">
			<div>
				<h3>Account user: Byarugaba stephen</h3>
			</div>
			<div class="users-left">

			<p class="count" id="offered_rides_count">2</p>

			<h3>Rides You have offered </h3>
			<ul class="trips_list" id="offered_rides">
			</ul>
		</div>
		<div class="users-right">
			<p class="count grn"><span id="taken_rides_count">3</span></p>
			<h3>Rides you have Taken </h3>

			<ul class="trips_list" id="taken_rides">
			</ul>
		</div>


	</div>

	<footer> </footer>


</body>
<script type="text/javascript" src="assets/js/global.js"></script>
<script type="text/javascript" src="assets/js/cookies.js"></script>

<script type="text/javascript">

window.onload = function(){
	fetch_my_trips();
}


function fetch_my_trips(){
	var url=SERVER_PATH+"api/v1/mytrips";
	fetch(url,{
		method:"GET",
		headers: {
			'Content-Type': 'application/json',
			'authorization':'Bearer '+get_cookie('auth_token')
			}
	})
	.then(function(response){
		return response.json()
	})
	.then(function(data){
		// console.log("data ",data)
		if(data.status=="success"){
			var users_offers=data.my_rides

			offers_list=""
			for(var i=0; i<users_offers.length; i++){

					temp_ride="<li>"+
											"<span>"+
											"<b>From: </b>"+users_offers[i]["origin"]+
											"</span>"+
											"<span>"+
											"<b>To</b>: "+users_offers[i]["destination"]+
											"</span>"+
											"<span>"+
											"<b>Depature time</b>: "+users_offers[i]["departure_time"]+
											"</span>"+
											"<p class='desc'>"+users_offers[i]["description"]+"</p>"+
										"</li>";

			 offers_list=offers_list+temp_ride;
			}
			document.getElementById("offered_rides_count").innerHTML=users_offers.length
			document.getElementById("offered_rides").innerHTML=offers_list

			var users_requests=data.my_requests

			requests_list=""
			for(var i=0; i<users_requests.length; i++){

					temp_request="<li>"+
												"<span>"+
												"<b>From:</b> "+users_requests[i]["origin"]+
												"<b> To</b>: "+users_requests[i]["destination"]+
												"</span>"+
												"<span>"+
												"<b>Driver</b>:"+users_requests[i]["owner_name"]+
												"</span>"+
												"<span>"+
												"<b>Depature time</b>:"+users_requests[i]["departure_time"]+
												"</span>"+
												"<p class='desc'>"+users_requests[i]["description"]+"</p>"+
											"</li>";
			 requests_list=requests_list+temp_request;
			}
			document.getElementById("taken_rides_count").innerHTML=users_requests.length
			document.getElementById("taken_rides").innerHTML=requests_list

		}
	})
	.catch(function(error){
		console.log("error",error)
	})
}


</script>

</html>
